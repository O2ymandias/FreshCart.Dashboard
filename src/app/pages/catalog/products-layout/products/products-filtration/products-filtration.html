<p-button
  severity="secondary"
  icon="pi pi-filter"
  size="small"
  rounded
  (click)="visible.set(true)"
/>
<p-drawer header="Advanced Filter" [(visible)]="visible" position="right">
  <div class="flex h-full flex-col justify-between gap-4">
    <!-- Filters -->
    <div class="flex flex-col gap-4">
      <!-- Search  -->
      <div class="flex flex-col gap-1">
        <label class="opacity-75" for="search">Search</label>
        <input
          id="search"
          type="search"
          pInputText
          pTooltip="By Id, Name, Description, Category or Brand"
          tooltipPosition="top"
          tooltipEvent="focus"
          placeholder="Search products"
          [(ngModel)]="searchQuery"
        />
      </div>

      <!-- Brand -->
      <div class="flex flex-col gap-1">
        <label class="opacity-75" (click)="brandElement.show()"> Brand</label>
        <p-select
          #brandElement
          class="w-full"
          [options]="brandsOptions()"
          [(ngModel)]="selectedBrandOption"
          [showClear]="true"
          placeholder="None"
          optionLabel="name"
        />
      </div>

      <!-- Category -->
      <div class="flex flex-col gap-1">
        <label class="opacity-75" (click)="categoryElement.show()">
          Category</label
        >
        <p-select
          #categoryElement
          class="w-full"
          [options]="categoriesOptions()"
          [(ngModel)]="selectedCategoryOption"
          [showClear]="true"
          placeholder="None"
          optionLabel="name"
        />
      </div>

      <!-- Min Price -->
      <div class="flex flex-col gap-1">
        <label class="opacity-75" for="minPrice">Min Price</label>
        <p-inputnumber
          inputId="minPrice"
          [(ngModel)]="minPrice"
          mode="decimal"
          [useGrouping]="false"
          class="w-full"
          [showButtons]="true"
          placeholder="None"
          [min]="1"
        />
      </div>

      <!-- Max Price -->
      <div class="flex flex-col gap-1">
        <label class="opacity-75" for="maxPrice">Max Price</label>
        <p-inputnumber
          inputId="maxPrice"
          [(ngModel)]="maxPrice"
          mode="decimal"
          [useGrouping]="false"
          class="w-full"
          [showButtons]="true"
          placeholder="None"
          [min]="1"
        />
      </div>
    </div>

    <!-- Buttons -->
    <div class="flex items-center justify-between gap-2">
      <p-button
        label="Apply"
        severity="primary"
        icon="pi pi-check"
        [loading]="loading()"
        [disabled]="noFilters()"
        (onClick)="applyFilters()"
      />
      <p-button
        label="Clear"
        severity="secondary"
        icon="pi pi-times"
        (onClick)="clearFilters()"
      />
    </div>
  </div>
</p-drawer>
