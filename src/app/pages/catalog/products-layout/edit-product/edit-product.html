<section class="px-6 py-12 space-y-4">
  <div>
    <p-breadcrumb [model]="navigationItems" />
  </div>

  <!-- Form Header -->
  <div class="text-center mb-8">
    <h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2">
      Update Product
    </h1>
    <p class="text-gray-600 dark:text-gray-400">
      Modify your product details and keep your inventory up to date
    </p>
  </div>

  <!-- Form -->
  <form
    [formGroup]="productUpdateForm"
    (ngSubmit)="updateProduct()"
    class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto p-8 rounded-2xl ring-1 ring-[var(--p-overlay-modal-border-color)]"
  >
    <!-- Picture -->
    <div class="md:col-span-2 flex flex-col gap-2">
      <app-edit-product-image
        [fetchedImage]="productDetails()?.pictureUrl ?? null"
        (onUploadImage)="onUploadImage($event)"
      />
    </div>

    <!-- Name -->
    <div class="flex flex-col gap-2">
      <label class="opacity-75" for="name">Name</label>
      <input formControlName="name" id="name" pInputText />
      <app-form-errors [control]="productUpdateForm.get('name')" label="Name" />
    </div>

    <!-- Price -->
    <div class="flex flex-col gap-2">
      <label for="price" class="opacity-75">Price</label>
      <p-inputnumber
        formControlName="price"
        inputId="price"
        mode="currency"
        currency="USD"
        locale="en-US"
        [showButtons]="true"
        buttonLayout="horizontal"
        spinnerMode="horizontal"
        [step]="1"
      >
        <ng-template #incrementbuttonicon>
          <span class="pi pi-plus"></span>
        </ng-template>
        <ng-template #decrementbuttonicon>
          <span class="pi pi-minus"></span>
        </ng-template>
      </p-inputnumber>
      <app-form-errors
        [control]="productUpdateForm.get('price')"
        label="Price"
      />
    </div>

    <!-- Brand -->
    <div class="flex flex-col gap-2">
      <label (click)="brandSelectOptions.show()" class="opacity-75"
        >Select a Brand</label
      >
      <p-select
        #brandSelectOptions
        formControlName="brand"
        [options]="brandsOptions()"
        optionLabel="name"
      />
      <app-form-errors
        [control]="productUpdateForm.get('brand')"
        label="Brand"
      />
    </div>

    <!-- Category -->
    <div class="flex flex-col gap-2">
      <label (click)="categorySelectOptions.show()" class="opacity-75"
        >Select a Category</label
      >
      <p-select
        #categorySelectOptions
        formControlName="category"
        [options]="categoriesOptions()"
        optionLabel="name"
      />
      <app-form-errors
        [control]="productUpdateForm.get('category')"
        label="Category"
      />
    </div>

    <!-- Stock -->
    <div class="flex flex-col gap-2 md:col-span-1">
      <label for="unitsInStock" class="opacity-75">Units In Stock</label>
      <p-inputnumber
        inputId="unitsInStock"
        formControlName="unitsInStock"
        [showButtons]="true"
        buttonLayout="horizontal"
        spinnerMode="horizontal"
        [step]="1"
      />
      <app-form-errors
        [control]="productUpdateForm.get('unitsInStock')"
        label="Units In Stock"
      />
    </div>

    <!-- Description -->
    <div class="flex flex-col gap-2 md:col-span-2">
      <label for="description" class="opacity-75">Description</label>
      <textarea
        formControlName="description"
        id="description"
        pTextarea
        [autoResize]="true"
      ></textarea>
      <app-form-errors
        [control]="productUpdateForm.get('description')"
        label="Description"
      />
    </div>

    <!-- Gallery -->
    <div class="md:col-span-2">
      <app-edit-product-gallery [productId]="id()" />
    </div>

    <!-- Translations -->
    <div class="md:col-span-2">
      <app-edit-product-translations [productId]="id()" />
    </div>

    <!-- Submit Button -->
    <div class="md:col-span-2 flex justify-end">
      <button
        pButton
        severity="success"
        type="submit"
        [disabled]="productUpdateForm.invalid"
      >
        <span pButtonLabel>Update</span>
      </button>
    </div>
  </form>
</section>
