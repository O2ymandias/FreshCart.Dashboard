<p-button
  icon="pi pi-cog"
  rounded
  outlined
  (onClick)="visible.set(true)"
  severity="secondary"
/>

<p-dialog
  [(visible)]="visible"
  [modal]="true"
  [draggable]="false"
  [resizable]="false"
  [dismissableMask]="true"
  [closeButtonProps]="{
    severity: 'secondary',
    rounded: true,
    outlined: true,
  }"
  styleClass="
    w-[90vw]
    sm:w-[75vw]
    md:w-[60vw]
    lg:w-[50vw]
    xl:w-[40vw]
  "
>
  <!-- Header -->
  <ng-template pTemplate="header">
    <div class="flex items-center gap-4">
      <div
        class="flex h-12 w-12 items-center justify-center rounded-2xl border border-gray-200/50 bg-white/50 shadow-sm backdrop-blur-sm dark:border-gray-700/50 dark:bg-gray-800/50"
      >
        <i
          class="pi pi-sync text-primary-600 dark:text-primary-400 text-lg"
        ></i>
      </div>
      <div>
        <h3 class="m-0 text-lg font-semibold text-gray-900 dark:text-gray-100">
          Update Order
        </h3>
        <p class="m-0 text-sm font-medium text-gray-500 dark:text-gray-400">
          Manage order and payment status
        </p>
      </div>
    </div>
  </ng-template>

  <!-- Content -->
  <div class="flex flex-col gap-6 py-4">
    <!-- Order Status  -->
    <app-update-order-status [order]="order()" />

    <!-- Divider -->
    <div class="border-surface-200 dark:border-surface-700 border-t"></div>

    <!-- Payment Status Section -->
    <app-update-payment-status [order]="order()" />

    <!-- Info Message -->
    <p
      class="border-primary-200 bg-primary-50/80 text-primary-800 dark:border-primary-800 dark:bg-primary-900/30 dark:text-primary-300 flex items-center gap-2 rounded-md border px-4 py-2 text-sm font-medium"
    >
      <i
        class="pi pi-info-circle text-primary-500 dark:text-primary-400 text-xl"
      ></i>
      Changes are saved automatically. Customers will be notified.
    </p>
  </div>

  <!-- Custom Footer -->
  <ng-template pTemplate="footer">
    <div class="flex items-center justify-end gap-2">
      <p-button
        label="Cancel"
        (onClick)="visible.set(false)"
        severity="secondary"
      />
    </div>
  </ng-template>
</p-dialog>
